% Colours! 
\newcommand{\targetcolourmodel}{cmyk} % rgb for a digital version, cmyk for a printed version. Only use lowercase
\selectcolormodel{\targetcolourmodel}

% Define colours from https://www.designguide.dtu.dk/
\definecolor{dtured}    {rgb/cmyk}{0.6,0,0 / 0,0.91,0.72,0.23}
\definecolor{blue}      {rgb/cmyk}{0.1843,0.2431,0.9176 / 0.88,0.76,0,0}
\definecolor{brightgreen}{rgb/cmyk}{0.1216,0.8157,0.5098 / 0.69,0,0.66,0}
\definecolor{navyblue}  {rgb/cmyk}{0.0118,0.0588,0.3098 / 1,0.9,0,0.6}
\definecolor{yellow}    {rgb/cmyk}{0.9647,0.8157,0.3019 / 0.05,0.17,0.82,0}
\definecolor{orange}    {rgb/cmyk}{0.9882,0.4627,0.2039 / 0,0.65,0.86,0}
\definecolor{pink}      {rgb/cmyk}{0.9686,0.7333,0.6941 / 0,0.35,0.26,0}
\definecolor{grey}      {rgb/cmyk}{0.8549,0.8549,0.8549 / 0,0,0,0.2}
\definecolor{red}       {rgb/cmyk}{0.9098,0.2471,0.2824 / 0,0.86,0.65,0}
\definecolor{green}     {rgb/cmyk}{0,0.5333,0.2078 / 0.89,0.05,1,0.17}
\definecolor{purple}    {rgb/cmyk}{0.4745,0.1373,0.5569 / 0.67,0.96,0,0}

\newcommand{\dtulogocolour}{white} % Colour of the DTU logo: white, black or dtured
\newcommand{\frontpagetextcolour}{white} % front page text colour: white or black
\colorlet{frontbackcolor}{dtured} % Set the background colour of the front- and back page. Choose the colour so it matches the main colour of front page picture

% DTU colours for diagrams
% You might want to make the front/back page background colour the first colour in the plot cycle list.
\pgfplotscreateplotcyclelist{DTU}{%
	dtured,         fill=dtured,        \\%
	blue,           fill=blue,          \\%
	brightgreen,    fill=brightgreen    \\%
	navyblue,       fill=navyblue       \\%
	yellow,         fill=yellow         \\%
	orange,         fill=orange         \\%
	grey,           fill=grey           \\%
	red,            fill=red            \\%
	green,          fill=green          \\%
	purple,         fill=purple         \\%
}


% Font
% There is no corporate serif font in the DTU design guide. The DTU design team has proposed to use Neo Sans for headings - and Arial for the body text.
% To change heading font to NeoSans Pro please upload both NeoSansPro-Regular.otf and NeoSansPro-Medium.otf to the root directory.
% \setmainfont{Arial}
% \renewcommand\thepart{Part \Roman{part}}
% \IfFontExistsTF{NeoSansPro-Medium.otf}
% { %If True set headings to NeoSans Pro
% \newfontface\NeoSansProReg{NeoSansPro-Regular.otf}
% \newfontface\NeoSansProMed{NeoSansPro-Medium.otf}
% \titleformat{\part}[display]{\NeoSansProMed \huge \centering}{\NeoSansProMed \Huge \thepart}{1em}{\thispagestyle{empty}}{}
% \titleformat{\chapter}{\NeoSansProMed\huge}{\thechapter}{1em}{\raggedright}
% \titleformat{\section}{\NeoSansProMed\Large}{\thesection}{1em}{\raggedright}
% \titleformat{\subsection}{\NeoSansProMed\large}{\thesubsection}{1em}{\raggedright}
% \titleformat{\subsubsection}{\NeoSansProMed\normalsize}{\thesubsubsection}{1em}{\raggedright}
% \newcommand\TitleFont[1]{{\NeoSansProMed #1}}
% \newcommand\titlefont[1]{{\NeoSansProReg #1}}
% }
% { % If false
% \titleformat{\part}[display]{\bfseries\huge \centering}{\bfseries\Huge \thepart}{1em}{\thispagestyle{empty}}{}
% \titleformat{\chapter}{\bfseries\huge}{\thechapter}{1em}{\raggedright}
% \titleformat{\section}{\bfseries\Large}{\thesection}{1em}{\raggedright}
% \titleformat{\subsection}{\bfseries\large}{\thesubsection}{1em}{\raggedright}
% \titleformat{\subsubsection}{\bfseries\normalsize}{\thesubsubsection}{1em}{\raggedright}
% \newcommand\TitleFont[1]{{\bfseries #1}}
% \newcommand\titlefont[1]{{#1}}
% }
% \urlstyle{sf}
%\def\UrlFont{\NeoSansProReg}


% If you wish to use the pdflatex compiler, sans-serif Helvetica can be used as a replacement for Arial. In this way you will be able to use the microtype package. Remember to add \usepackage[utf8]{inputenc} and disable the fontspec package. 
\newcommand\TitleFont[1]{{\bfseries #1}}
\newcommand\titlefont[1]{{#1}}
\fontfamily{qhv}\selectfont
\renewcommand{\familydefault}{\sfdefault}


% Watermark for confidential or draft (or anything else)
%\sffamily % set the correct font for the watermark
%\newsavebox\mybox
%\savebox\mybox{\tikz[color=grey,opacity=0.5]\node{Template};}

%\newwatermark*[
%oddpages,
%angle=60,
%scale=12,
%fontfamily=qhv,
%xpos=-40,
%ypos=30,
%]{\usebox\mybox}

%\newwatermark*[
%evenpages,
%angle=60,
%scale=12,
%fontfamily=qhv,
%xpos=-50,
%ypos=30,
%]{\usebox\mybox}


% Table of contents (TOC) and numbering of headings
\setcounter{tocdepth}{2}    % Depth of table of content: sub sections will not be included in table of contents
\setcounter{secnumdepth}{2} % Depth of section numbering: sub sub sections are not numbered

\makeatletter % Reset chapter numbering for each part
\@addtoreset{chapter}{part}
\makeatother  

% Spacing of titles and captions
\titlespacing\chapter{0pt}{0pt plus 4pt minus 2pt}{4pt plus 2pt minus 2pt}
\titlespacing\section{0pt}{12pt plus 3pt minus 3pt}{2pt plus 1pt minus 1pt}
\titlespacing\subsection{0pt}{8pt plus 2pt minus 2pt}{0pt plus 1pt minus 1pt}
\titlespacing\subsubsection{0pt}{4pt plus 1pt minus 1pt}{-2pt plus 1pt minus 1pt}
\captionsetup{belowskip=\parskip,aboveskip=4pt plus 1pt minus 1pt}

% Note the ## here. It's required because \fancypagestyle is making a macro
% (\ps@fancybook).  If we just wrote #1, TeX would think that it's the argument
% to \ps@fancybook, but \ps@fancybook doesn't take any arguments, so TeX would
% complain with an error message.
% You are not expected to understand this.
%\renewcommand*{\sectionmark}[1]{\thesection\ ##1} %
%\renewcommand*{\chaptermark}[1]{\chaptername\ \thechapter: ##1}%
%\renewcommand*{\sectionmark}[1]{\thesection\ `#1} %
%\renewcommand*{\chaptermark}[1]{\chaptername\ \thechapter: `#1}%
%\renewcommand*{\chaptermark}[1]{\markboth{#1}{}}
%\renewcommand*{\chaptermark}[1]{\markboth{\MakeUppercase{#1}}{}}
% Note: January 10, 2021 - for some reason these two commands generate errors after an update - disabled.


% Setup header and footer
\fancypagestyle{main}{% All normal pages
	\fancyhead{}
	\fancyfoot{}
	\renewcommand{\headrulewidth}{0pt}
	\fancyhead[LE,RO]{\footnotesize \thesistitle}
	\fancyfoot[LE,RO]{\footnotesize \thepage}
	\fancyfoot[RE,LO]{\footnotesize \chaptermark} % - \rightmark
	\fancyhfoffset[E,O]{0pt}
}
\fancypagestyle{plain}{% Chapter pages
	\fancyhead{}
	\fancyfoot{}
	\renewcommand{\headrulewidth}{0pt}
	\fancyhead[LE,RO]{\footnotesize \thesistitle}
	\fancyfoot[LE,RO]{\footnotesize \thepage}
	\fancyfoot[RE,LO]{\footnotesize \chaptermark} % - \leftmark
	\fancyhfoffset[E,O]{0pt}
}

%\fancyfoot[C]{Page \thepage \space of \pageref{LastPage}}

% Setup for diagrams and graphs (tikz pictures) 
\usetikzlibrary{spy}    % For magnifying anything within a tikzpicture, see the line graph
\usepgfplotslibrary{statistics} % Package for the boxplot
\pgfplotsset{ % Setup for diagrams
	compat=newest,
	major x grid style={line width=0.5pt,draw=grey},
	major y grid style={line width=0.5pt,draw=grey},
	legend style={at={(0.5,-0.1)}, anchor=north,fill=none,draw=none,legend columns=-1,/tikz/every even column/.append style={column sep=10pt}},
	axis line style={draw=none},
	tick style={draw=none},
	every axis/.append style={ultra thick},
	tick label style={/pgf/number format/assume math mode}, % To apply main font to tick labels (numbers on the axis)
}
\tikzset{every mark/.append style={scale=1.5}}


% Hypersetup
\hypersetup{
	pdfauthor={\thesisauthor},
	pdftitle={\thesistitle},
	pdfsubject={\thesissubtitle},
	pdfdisplaydoctitle,
	bookmarksnumbered=true,
	bookmarksopen,
	breaklinks,
	linktoc=all,
	plainpages=false,
	unicode=true,
	colorlinks=false,
	hidelinks,                        % Do not show boxes or coloured links.
}


% Listings setup
\lstset{
	basicstyle=\footnotesize\ttfamily,% the size of the fonts that are used for the code
	commentstyle=\color{green},       % comment style
	keywordstyle=\bfseries\ttfamily\color{blue}, % keyword style
	numberstyle=\sffamily\tiny\color{grey}, % the style that is used for the line-numbers
	stringstyle=\color{purple},       % string literal style
	rulecolor=\color{grey},           % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
	breakatwhitespace=false,          % sets if automatic breaks should only happen at whitespace
	breaklines=true,                  % sets automatic line breaking
	captionpos=b,                     % sets the caption-position to bottom
	deletekeywords={},                % if you want to delete keywords from the given language
	escapeinside={\%*}{*)},           % if you want to add LaTeX within your code
	frame=single,                     % adds a frame around the code
	xleftmargin=4pt, 
	morekeywords={*,...},             % if you want to add more keywords to the set
	numbers=left,                     % where to put the line-numbers; possible values are (none, left, right)
	numbersep=10pt,                   % how far the line-numbers are from the code
	showspaces=false,                 % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
	showstringspaces=false,           % underline spaces within strings only
	showtabs=false,                   % show tabs within strings adding particular underscores
	stepnumber=1,                     % the step between two line-numbers. If it's 1, each line will be numbered
	tabsize=2,                        % sets default tabsize to 2 spaces
	title=\lstname,                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}

% Signature field
\newlength{\myl}
\newcommand{\namesigdatehrule}[1]{\par\tikz \draw [black, densely dotted, very thick] (0.04,0) -- (#1,0);\par}
\newcommand{\namesigdate}[2][]{%
	\settowidth{\myl}{#2}
	\setlength{\myl}{\myl+10pt}
	\begin{minipage}{\myl}%
		\begin{center}
			#2  % Insert name from the command eg. \namesigdate{\authorname}
			\vspace{1.5cm} % Spacing between name and signature line 
			\namesigdatehrule{\myl}\smallskip % Signature line and a small skip
			\small \textit{Signature} % Text under the signature line "Signature"
			\vspace{1.0cm} % Spacing between "Signature" and the date line
			\namesigdatehrule{\myl}\smallskip % Date line and a small skip
			\small \textit{Date} % Text under date line "Date" 
		\end{center}
	\end{minipage}
}

% For the back page: cleartoleftpage
\newcommand*\cleartoleftpage{%
	\clearpage
	\ifodd\value{page}\hbox{}\newpage\fi
}

%\newcommand{\comment}[1]{} % Use this command for commenting out sections

% For cleveref and subcaption (subfigures) for correct hyperref.
\captionsetup[subfigure]{subrefformat=simple,labelformat=simple}
\renewcommand\thesubfigure{(\alph{subfigure})}

% Chapter number and chapter title in one line
\titleformat{\chapter}[hang] 
{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter:}{1em}{} 

% Make MATLAB scripts look nice
\let\ph\snippetPlaceholder
\lstset
{
	style = Matlab-editor,
	basicstyle = \mlttfamily
	escapechar      = `,
	mlshowsectionrules = tue,
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% siunitx - different prefixes in range
\sisetup{%
	,exponent-to-prefix = true
	,zero-decimal-to-integer
}
% Example:
% \SIrange[scientific-notation = engineering]{150}{8000}{\kilo\hertz}\\
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%Overhead bars - for inverted variables, etc
% Usage: x = $\xbar{y}$
\newcommand*\xbar[1]{%
	\hbox{%
		\vbox{%
			\hrule height 0.5pt % The actual bar
			\kern0.5ex%         % Distance between bar and symbol
			\hbox{%
				\kern-0.1em%      % Shortening on the left side
				\ensuremath{#1}%
				\kern-0.1em%      % Shortening on the right side
			}%
		}%
	}%
}

%%%% New SI unit for inductor turns
\DeclareSIUnit{\turns}{turns}

%%%% Want list of code in TOC
\renewcommand\lstlistlistingname{List of Code}

%% Listings fix ÆØÅ
%\lstset{
%	inputencoding=utf8,
%	basicstyle=\ttfamily\small,
%	numberstyle=\footnotesize,
%	numbers=left,
%	backgroundcolor=\color{gray!10},
%	rulecolor=\color{black!30},
%	breaklines=true,
%	breakatwhitespace=true,
%	extendedchars=true,
%	literate={æ}{{\a}}1 {ø}{{\o}}1 {å}{{\a}}1
%}
\lstset{literate=
	{á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
	{Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
	{à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
	{À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
	{ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
	{Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
	{â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
	{Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
	{Ã}{{\~A}}1 {ã}{{\~a}}1 {Õ}{{\~O}}1 {õ}{{\~o}}1
	{œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
	{ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
	{ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
	{€}{{\euro}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
	{»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1
}